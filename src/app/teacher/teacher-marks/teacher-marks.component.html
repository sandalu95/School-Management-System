<div class="outer-container">
  <mat-card>
    <div class="card-head">
      <h3 class="card-head-heading">Add Student Marks</h3>
    </div>
    <mat-divider></mat-divider>
    <mat-tab-group class="card-body">
      <mat-tab label="Term Test">
        <mat-grid-list cols="15" rowHeight="90px">
          <form
            [formGroup]="ttMarksForm"
            (ngSubmit)="saveTermTestMarks(ttMarksForm.value)"
          >
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field appearance="outline" class="ttMarks-form-field">
                <mat-label>Admission Number</mat-label>
                <input matInput formControlName="studentNumber" required />
                <mat-error *ngIf="ttMarksForm.get('studentNumber').invalid">{{
                  getError(ttMarksForm.get("studentNumber"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field appearance="outline" class="ttMarks-form-field">
                <mat-label>Grade</mat-label>
                <input matInput formControlName="grade" required />
                <mat-error *ngIf="ttMarksForm.get('grade').invalid">{{
                  getError(ttMarksForm.get("grade"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field appearance="outline" class="ttMarks-form-field">
                <mat-label>Class</mat-label>
                <mat-select formControlName="class" required>
                  <mat-option *ngFor="let class of classList" [value]="class">{{
                    class
                  }}</mat-option>
                </mat-select>
                <mat-error *ngIf="ttMarksForm.get('class').invalid">{{
                  getError(ttMarksForm.get("class"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field appearance="outline" class="ttMarks-form-field">
                <mat-label>Year</mat-label>
                <mat-select formControlName="year" required>
                  <mat-option *ngFor="let year of yearArray" [value]="year">{{
                    year
                  }}</mat-option>
                </mat-select>
                <mat-error *ngIf="ttMarksForm.get('year').invalid">{{
                  getError(ttMarksForm.get("year"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field appearance="outline" class="ttMarks-form-field">
                <mat-label>Term</mat-label>
                <mat-select formControlName="term" required>
                  <mat-option value="1">1</mat-option>
                  <mat-option value="2">2</mat-option>
                  <mat-option value="3">3</mat-option>
                </mat-select>
                <mat-error *ngIf="ttMarksForm.get('term').invalid">{{
                  getError(ttMarksForm.get("term"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="4" rowspan="3">
              <div class="add-result">
                <form [formGroup]="addSubjectForm">
                  <mat-form-field
                    appearance="outline"
                    class="add-subject-form-field"
                  >
                    <mat-label>Subject</mat-label>
                    <input matInput formControlName="subject" />
                  </mat-form-field>
                  <mat-form-field
                    appearance="outline"
                    class="add-subject-form-field"
                  >
                    <mat-label>Mark</mat-label>
                    <input matInput formControlName="mark" />
                  </mat-form-field>
                  <button
                    mat-raised-button
                    id="addresultbtn"
                    (click)="
                      addResult(
                        addSubjectForm.get('subject').value,
                        addSubjectForm.get('mark').value
                      )
                    "
                  >
                    Add Result
                  </button>
                </form>
              </div>
            </mat-grid-tile>
            <mat-grid-tile colspan="7" rowspan="3">
              <div class="add-result result-list">
                Results
                <div class="scrollbar" id="style-3">
                  <div class="force-overflow">
                    <div
                      style="display: flex; justify-content: space-between;"
                      *ngFor="let result of results"
                    >
                      <h4 style="margin-bottom: 0;">{{ result.subject }}</h4>
                      <h4 style="margin-right: 10%; margin-bottom: 0;">
                        {{ result.mark }}
                      </h4>
                    </div>
                  </div>
                </div>
              </div>
            </mat-grid-tile>
            <mat-grid-tile colspan="4" rowspan="2"></mat-grid-tile>
            <mat-grid-tile colspan="1" rowspan="1"></mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1" id="button-group">
              <button type="submit" mat-raised-button id="savebtn">Save</button>
            </mat-grid-tile>
          </form>
        </mat-grid-list>
      </mat-tab>
      <mat-tab label="Assignment">
        <mat-grid-list cols="15" rowHeight="90px">
          <form
            [formGroup]="assignmentForm"
            (ngSubmit)="saveAssignment(assignmentForm.value)"
          >
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field
                appearance="outline"
                class="assignment-form-field"
              >
                <mat-label>Assignment Name</mat-label>
                <input matInput formControlName="assignmentName" required />
                <mat-error
                  *ngIf="assignmentForm.get('assignmentName').invalid"
                  >{{
                    getError(assignmentForm.get("assignmentName"))
                  }}</mat-error
                >
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field
                appearance="outline"
                class="assignment-form-field"
              >
                <mat-label>Subject</mat-label>
                <input matInput formControlName="subject" required />
                <mat-error *ngIf="assignmentForm.get('subject').invalid">{{
                  getError(assignmentForm.get("subject"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field
                appearance="outline"
                class="assignment-form-field"
              >
                <mat-label>Grade</mat-label>
                <input matInput formControlName="grade" required />
                <mat-error *ngIf="assignmentForm.get('grade').invalid">{{
                  getError(assignmentForm.get("grade"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <mat-form-field
                appearance="outline"
                class="assignment-form-field"
              >
                <mat-label>Class</mat-label>
                <mat-select formControlName="class" required>
                  <mat-option *ngFor="let class of classList" [value]="class">{{
                    class
                  }}</mat-option>
                </mat-select>
                <mat-error *ngIf="assignmentForm.get('class').invalid">{{
                  getError(assignmentForm.get("class"))
                }}</mat-error>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1">
              <button
                mat-raised-button
                class="button"
                type="button"
                (click)="
                  apply(
                    assignmentForm.get('grade').value,
                    assignmentForm.get('class').value
                  )
                "
              >
                Apply
              </button>
            </mat-grid-tile>
            <mat-grid-tile colspan="12" rowspan="3">
              <div class="student-list">
                <div class="scrollbar" id="style-3">
                  <div class="force-overflow">
                    <div
                      style="display: flex; justify-content: space-between; height: 25px; margin-bottom: 10px;"
                      *ngFor="let student of studentlist"
                    >
                      <h4 style="height: 100%; margin: 0;">
                        {{ student.nameinitials }}
                      </h4>
                      <input
                        class="mark"
                        id="{{ student.admissionnumber }}"
                        style="margin-right: 10%; border:1px solid lightgray; height: 100%;"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="2"></mat-grid-tile>
            <mat-grid-tile colspan="3" rowspan="1" id="button-group">
              <button type="submit" mat-raised-button class="button">
                Save
              </button>
            </mat-grid-tile>
          </form>
        </mat-grid-list>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</div>
